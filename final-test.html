<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YELLOWBOX - Final Test</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; padding: 20px;">YELLOWBOX App - Final Test</h1>
        
        <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h2>Test Results:</h2>
            <div id="testResults"></div>
        </div>
        
        <nav class="tabs">
            <button class="tab-btn active" data-tab="riders">Riders</button>
            <button class="tab-btn" data-tab="onboarding">Onboarding</button>
            <button class="tab-btn" data-tab="payments">Payments</button>
        </nav>
        
        <!-- Riders Section -->
        <section id="ridersSection" class="tab-section active">
            <header class="header">
                <h1>Riders Tab</h1>
            </header>
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr><th>ID</th><th>Name</th><th>Status</th></tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </section>

        <!-- Onboarding Section -->
        <section id="onboardingSection" class="tab-section" style="display:none">
            <header class="header">
                <h2>Onboarding Tab</h2>
            </header>
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr><th>Name</th><th>EID</th><th>Status</th></tr>
                    </thead>
                    <tbody id="obTableBody"></tbody>
                </table>
            </div>
        </section>

        <!-- Payments Section -->
        <section id="paymentsSection" class="tab-section" style="display:none">
            <header class="header">
                <h2>Payments Tab</h2>
            </header>
            <div class="filters">
                <button class="btn btn-secondary" id="payTabSettingsBtn">Settings</button>
                <button class="btn btn-secondary" id="payTabProfilesBtn">Salary Profiles</button>
                <button class="btn btn-secondary" id="payTabPayrollBtn">Payroll</button>
            </div>
            <div id="paymentsContent">
                <div id="paySettings" class="pay-pane">
                    <p style="padding: 20px;">Settings Pane</p>
                </div>
                <div id="payProfiles" class="pay-pane" style="display:none;">
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead><tr><th>Rider</th><th>Base Salary</th></tr></thead>
                            <tbody id="profilesTableBody"></tbody>
                        </table>
                    </div>
                </div>
                <div id="payPayroll" class="pay-pane" style="display:none;">
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead><tr><th>Rider</th><th>Net Pay</th></tr></thead>
                            <tbody id="payrollTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
    <script>
        // Run tests after page loads
        window.addEventListener('load', function() {
            const results = [];
            
            // Test 1: Check if data loaded
            if (typeof fleetData !== 'undefined' && fleetData.riders.length > 0) {
                results.push('✅ Data loaded: ' + fleetData.riders.length + ' riders');
            } else {
                results.push('❌ Data NOT loaded');
            }
            
            // Test 2: Check if functions exist
            const funcs = ['initializeDashboard', 'initTabs', 'initOnboarding', 'initPayments'];
            funcs.forEach(fn => {
                if (typeof window[fn] === 'function') {
                    results.push('✅ Function ' + fn + ' exists');
                } else {
                    results.push('❌ Function ' + fn + ' MISSING');
                }
            });
            
            // Test 3: Check if sections exist
            const sections = ['ridersSection', 'onboardingSection', 'paymentsSection'];
            sections.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    results.push('✅ Section #' + id + ' found');
                } else {
                    results.push('❌ Section #' + id + ' NOT found');
                }
            });
            
            // Test 4: Check if tabs work
            const tabBtns = document.querySelectorAll('.tab-btn');
            if (tabBtns.length === 3) {
                results.push('✅ Found 3 tab buttons');
            } else {
                results.push('❌ Tab buttons: expected 3, found ' + tabBtns.length);
            }
            
            // Test 5: Try to render tables
            try {
                if (typeof renderOnboardingTable === 'function') {
                    renderOnboardingTable();
                    const tbody = document.getElementById('obTableBody');
                    if (tbody && tbody.innerHTML.length > 0) {
                        results.push('✅ Onboarding table rendered');
                    } else {
                        results.push('⚠️ Onboarding table empty (expected - no data)');
                    }
                }
            } catch (e) {
                results.push('❌ Error rendering onboarding: ' + e.message);
            }
            
            try {
                if (typeof renderProfilesTable === 'function') {
                    renderProfilesTable();
                    const tbody = document.getElementById('profilesTableBody');
                    if (tbody && tbody.innerHTML.length > 0) {
                        results.push('✅ Profiles table rendered');
                    } else {
                        results.push('⚠️ Profiles table empty (expected - no data)');
                    }
                }
            } catch (e) {
                results.push('❌ Error rendering profiles: ' + e.message);
            }
            
            // Display results
            document.getElementById('testResults').innerHTML = results.map(r => '<p style="margin: 5px 0;">' + r + '</p>').join('');
            
            // Add click test for tabs
            setTimeout(() => {
                results.push('<br><strong>Click the tabs above to test navigation!</strong>');
                document.getElementById('testResults').innerHTML = results.map(r => '<p style="margin: 5px 0;">' + r + '</p>').join('');
            }, 500);
        });
    </script>
</body>
</html>
